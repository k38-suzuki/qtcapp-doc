
ROSとの連携
===========

QtcappはROSと連携することが可能です。ここではQtcappをROSパッケージとしてビルドする方法について解説します。

Catkinワークスペースの作成
--------------------------

Choreonoid用のCatkinワークスペースを作成します。

ワークスペースは通常これはホームディレクトリ上に作成します。ワークスペースの名前は通常 "catkin_ws" とします。この名前は変更しても結構ですが、その場合は以下の説明の "catkin_ws" をその名前に置き換えるようにしてください。

まず空のワークスペースを作成します。 ::

 mkdir catkin_ws
 cd catkin_ws
 mkdir src
 catkin init

パッケージソースの追加
----------------------

作成したワークスペースの "src" ディレクトリ内に、Qtcappのソースコードリポジトリをクローンします。 ::

 cd src
 git clone https://github.com/k38-suzuki/qtcapp.git

ビルド
------

ワークスペース内のディレクトリで、以下のコマンドでビルドします。 ::

 catkin build --cmake-args -DBUILD_QTCAPP_ROS=ON

ワークスペースセットアップスクリプトの取り込み
----------------------------------------------

ビルドをすると、 ワークスペースのdevelディレクトリに "setup.bash" というファイルが生成されます。このスクリプトに記述されている設定は、ワークスペース内のパッケージを実行したりする際に必要となりますので、デフォルトで実行されるようにしておきます。通常はホームディレクトリの .bashrc ファイルに ::

 source $HOME/catkin_ws/devel/setup.bash

という記述を追加しておきます。

すると端末起動時に自動でこのファイルが実行され、設定が読み込まれるようになります。

初回ビルド時はまだこの設定が取り込まれていませんので、端末を起動し直すか、上記のコマンドをコマンドラインから直接入力して、設定を反映させるようにしてください。

ROSマスターの起動
-----------------

端末を開いて以下を入力し、ROSマスターを起動します。 ::

 roscore

Qtcappの起動
------------

端末を開いて以下を入力し、Qtcappを起動します。 ::

 rosrun qtcapp node

